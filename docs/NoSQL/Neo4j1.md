## 图

图是两个或多个实体之间关联的抽象数学表示，为实体对象间的相互关系进行建模，通常由以下部分组成：

- 节点，即前面提到的对象或实体：数学中通常称为顶点（vertices）。在Neo4j中，通常称为节点（nodes）。
- 节点之间的连接：数学中称为边（edges）。而Neo4j中一般称为关系（relationships）。
- 节点和关系相互连接构成一个图：许多重要的度量指标，例如连接到一个节点的边数（称之为度）就可以确定下来。许多其他度量指标也就自然形成。

简单来说：

> 一个图由无数的节点和关系组成，关系将图中各个节点连接起来

### 图论的定义和用途

图论，是研究图的建模和算法

**应用场景：**

- 社交关系
- 行驶路线调度
- 网络管理
- 算法中生成和依赖分析
- 推荐系统

**相关算法：**

- Dijkstra算法：用于计算图中两个节点之间的最短加权路径，图中边上可赋予权重或成本。
- A\*（A-star）算法：Dijkstra算法的一个变种，使用启发式来更有效地预测最短路径搜索。当A*算法发现潜在的图路径时，将其保存到一个带排序的优先队列中作为备选路径段，并计算出路径搜索过程中不同参数条件下过去路径（past path）和将来路径（futurepath）可能的开销。

## 图数据库

使用顶点、边与属性来表示和存储数据的数据库

### 为何需要图数据库

- 关系数据库系统受规模的影响严重。当关系集合或表变长时，查询响应时间通常会变得越来越糟。
- 关系数据库是非常“反关系”（anti-relational）的。应用领域中采用关系模型建模会变得更加复杂、更难以处理。
- 关系数据库甚至在数据入库前强加一个模式（schema），且该模式过于严格。

简单的说：

> 图数据库主要用于存储更多的连接数据。如果使用RDBMS存储的话，建模困难、遍历大量数据的性能差。

### 特点和优势

Neo4j的特点：

- 它遵循属性图数据模型
- 它通过使用Apache Lucence支持索引
- 它支持UNIQUE约束
- 它支持完整的ACID（原子性，一致性，隔离性和持久性）规则
- 支持事务

# 组成

##### node

节点

构成一张图的基本元素是节点和关系。在Neo4j中，节点和关系都可以包含属性。 节点经常被用于表示一些实体，但依赖关系也一样可以表示实体。

可以包含属性和label。

##### Relation

关系

关系是显式的。

一个关系连接两个节点，必须有一个开始节点和结束节点。

关系是有方向的，这在关系查询中会被使用到。

可以包含属性和关系类型。

##### 属性

节点和关系都可以设置自己的属性。 属性是由Key-Value键值对组成，键名是字符串。

属性值类型：

| Type    | Description                                              | Value range                                            |
| ------- | -------------------------------------------------------- | ------------------------------------------------------ |
| boolean | true/false                                               |                                                        |
| byte    | 8-bit integer                                            | -128 to 127, inclusive                                 |
| short   | 16-bit integer                                           | -32768 to 32767, inclusive                             |
| int     | 32-bit integer                                           | -2147483648 to 2147483647, inclusive                   |
| long    | 64-bit integer                                           | -9223372036854775808 to 9223372036854775807, inclusive |
| float   | 32-bit IEEE 754 floating-point number                    |                                                        |
| double  | 64-bit IEEE 754 floating-point number                    |                                                        |
| char    | 16-bit unsigned integers representing Unicode characters | u0000 to uffff (0 to 65535)                            |
| String  | sequence of Unicode characters                           |                                                        |

##### label

标签

新增节点据时设定的一个类型,一个节点可以拥有多个类型。可以在查询中使用来指定查询带有此类型的节点（也可以不指定label，会查询所有节点)。

##### relation type

关系类型

关系类型（Type）功能上与节点标签相似。关系类型是关系上的强制性属性（每个关系必须有且仅有一个类型，但两个节点之间可以有多个关系）

主要用于图的复杂深度遍历，一个特定的查询需指定一个节点到另一个节点的特定路径类型。